{"ast":null,"code":"var _jsxFileName = \"/home/mint/Projects/onlyFriends/client/src/components/SignUpModal/index.js\",\n    _s = $RefreshSig$();\n\nimport Modal from '../Modal.js';\nimport { useState, useContext } from 'react';\nimport axios from '../../lib/axios.js';\nimport { UserContext } from '../../context/UserContext.js';\nimport Spinner from '../elements/Spinner.js';\nimport SignUpForm from './SignUpForm.js';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SignUpSchema = yup.object().shape({\n  name: yup.string().min(1, 'No name provided.').max(50, 'Name cannot be greater than 50 letters.').matches(/^[a-zA-Z][a-zA-Z\\s]*$/, 'Name can only contain letters and spaces.').required('No name provided.'),\n  email: yup.string().email('Enter a valid email.').required('No email provided.'),\n  password: yup.string().required('No password provided.').matches(/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{8,}$/, 'Must Contain 8 Characters, One Uppercase, One Lowercase, One Number and One Special Case Character').max(50, 'Cannot be greater than 50 characters.'),\n  confirmPassword: yup.string().required('Password confirmation is required.').oneOf([yup.ref('password'), null], 'Passwords must match.')\n});\nexport default function SignUpModal(_ref) {\n  _s();\n\n  let {\n    open,\n    close\n  } = _ref;\n  const [loading, setLoading] = useState(false); // true | false | null\n\n  const [signupSuccess, setSignupSuccess] = useState(null);\n  const [signupError, setSignupError] = useState('');\n  const [errorCode, setErrorCode] = useState(0);\n  const {\n    setAuth\n  } = useContext(UserContext);\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    },\n    reset\n  } = useForm({\n    resolver: yupResolver(SignUpSchema)\n  });\n\n  const handleOnClose = () => {\n    close(false);\n    setLoading(false);\n    setTimeout(() => {\n      reset();\n      setSignupSuccess(null);\n      setSignupError('');\n      setErrorCode(0);\n    }, 500);\n  };\n\n  const onSubmit = async data => {\n    const modifiedData = {\n      name: data.name.toLowerCase(),\n      email: data.email.toLowerCase(),\n      password: data.password\n    };\n    setLoading(true);\n\n    try {\n      const res = await axios.post('/signup', modifiedData);\n      console.log(res);\n      const {\n        token,\n        _id,\n        name,\n        email: userEmail,\n        is_admin,\n        is_member\n      } = res.data;\n      localStorage.setItem('token', token);\n      setAuth(prev => ({ ...prev,\n        isAuth: true,\n        name,\n        email: userEmail,\n        is_member,\n        is_admin,\n        id: _id\n      }));\n      setSignupSuccess(true);\n    } catch (error) {\n      if (error.response.status === 409) {\n        setSignupError('User already exists. Please login.');\n        setErrorCode(409);\n      } else {\n        setSignupError('Something went wrong.');\n      }\n\n      setSignupSuccess(false);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    open: open,\n    onClose: handleOnClose,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white py-9 px-4 sm:px-10 w-80 sm:w-[28rem] rounded-md relative\",\n      children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center items-center h-[250px]\",\n        children: /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(SignUpForm, {\n        signupSuccess: signupSuccess,\n        handleOnClose: handleOnClose,\n        handleSubmit: handleSubmit,\n        onSubmit: onSubmit,\n        register: register,\n        errors: errors,\n        setSignupSuccess: setSignupSuccess,\n        signupError: signupError,\n        errorCode: errorCode\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SignUpModal, \"dfQrl1Oyx1lOPWMa0U1X4jedt1U=\", false, function () {\n  return [useForm];\n});\n\n_c = SignUpModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignUpModal\");","map":{"version":3,"names":["Modal","useState","useContext","axios","UserContext","Spinner","SignUpForm","useForm","yup","yupResolver","SignUpSchema","object","shape","name","string","min","max","matches","required","email","password","confirmPassword","oneOf","ref","SignUpModal","open","close","loading","setLoading","signupSuccess","setSignupSuccess","signupError","setSignupError","errorCode","setErrorCode","setAuth","register","handleSubmit","formState","errors","reset","resolver","handleOnClose","setTimeout","onSubmit","data","modifiedData","toLowerCase","res","post","console","log","token","_id","userEmail","is_admin","is_member","localStorage","setItem","prev","isAuth","id","error","response","status"],"sources":["/home/mint/Projects/onlyFriends/client/src/components/SignUpModal/index.js"],"sourcesContent":["import Modal from '../Modal.js';\nimport { useState, useContext } from 'react';\nimport axios from '../../lib/axios.js';\nimport { UserContext } from '../../context/UserContext.js';\nimport Spinner from '../elements/Spinner.js';\nimport SignUpForm from './SignUpForm.js';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport { yupResolver } from '@hookform/resolvers/yup';\n\nconst SignUpSchema = yup.object().shape({\n  name: yup\n    .string()\n    .min(1, 'No name provided.')\n    .max(50, 'Name cannot be greater than 50 letters.')\n    .matches(\n      /^[a-zA-Z][a-zA-Z\\s]*$/,\n      'Name can only contain letters and spaces.'\n    )\n    .required('No name provided.'),\n  email: yup\n    .string()\n    .email('Enter a valid email.')\n    .required('No email provided.'),\n  password: yup\n    .string()\n    .required('No password provided.')\n    .matches(\n      /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{8,}$/,\n      'Must Contain 8 Characters, One Uppercase, One Lowercase, One Number and One Special Case Character'\n    )\n    .max(50, 'Cannot be greater than 50 characters.'),\n  confirmPassword: yup\n    .string()\n    .required('Password confirmation is required.')\n    .oneOf([yup.ref('password'), null], 'Passwords must match.'),\n});\n\nexport default function SignUpModal({ open, close }) {\n  const [loading, setLoading] = useState(false);\n  // true | false | null\n  const [signupSuccess, setSignupSuccess] = useState(null);\n  const [signupError, setSignupError] = useState('');\n  const [errorCode, setErrorCode] = useState(0);\n\n  const { setAuth } = useContext(UserContext);\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    reset,\n  } = useForm({ resolver: yupResolver(SignUpSchema) });\n\n  const handleOnClose = () => {\n    close(false);\n    setLoading(false);\n\n    setTimeout(() => {\n      reset();\n      setSignupSuccess(null);\n      setSignupError('');\n      setErrorCode(0);\n    }, 500);\n  };\n\n  const onSubmit = async (data) => {\n    const modifiedData = {\n      name: data.name.toLowerCase(),\n      email: data.email.toLowerCase(),\n      password: data.password,\n    };\n\n    setLoading(true);\n\n    try {\n      const res = await axios.post('/signup', modifiedData);\n\n      console.log(res);\n\n      const {\n        token,\n        _id,\n        name,\n        email: userEmail,\n        is_admin,\n        is_member,\n      } = res.data;\n\n      localStorage.setItem('token', token);\n\n      setAuth((prev) => ({\n        ...prev,\n        isAuth: true,\n        name,\n        email: userEmail,\n        is_member,\n        is_admin,\n        id: _id,\n      }));\n\n      setSignupSuccess(true);\n    } catch (error) {\n      if (error.response.status === 409) {\n        setSignupError('User already exists. Please login.');\n        setErrorCode(409);\n      } else {\n        setSignupError('Something went wrong.');\n      }\n\n      setSignupSuccess(false);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Modal open={open} onClose={handleOnClose}>\n      <div className=\"bg-white py-9 px-4 sm:px-10 w-80 sm:w-[28rem] rounded-md relative\">\n        {loading ? (\n          <div className=\"flex justify-center items-center h-[250px]\">\n            <Spinner />\n          </div>\n        ) : (\n          <SignUpForm\n            signupSuccess={signupSuccess}\n            handleOnClose={handleOnClose}\n            handleSubmit={handleSubmit}\n            onSubmit={onSubmit}\n            register={register}\n            errors={errors}\n            setSignupSuccess={setSignupSuccess}\n            signupError={signupError}\n            errorCode={errorCode}\n          />\n        )}\n      </div>\n    </Modal>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}